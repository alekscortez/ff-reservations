<div class="sidebar-backdrop hidden fixed inset-0 z-[250] bg-black/40 md:z-[70]" (click)="closeMobileNav()"></div>
<nav class="sidebar fixed inset-y-0 left-0 z-[260] flex w-60 -translate-x-full flex-col gap-1 border-r border-brand-100 bg-brand-50 px-3 py-4 shadow-[4px_0_20px_rgba(0,0,0,0.12)] transition-transform duration-200 md:fixed md:inset-y-auto md:left-0 md:top-16 md:bottom-0 md:z-[80] md:h-auto md:w-[220px] md:overflow-hidden md:translate-x-0 md:shadow-none">
  <div class="sidebar-head mb-2 hidden items-center justify-between gap-2 md:hidden">
    <span class="text-sm font-semibold text-brand-800">Menu</span>
    <button type="button" class="rounded-lg border border-brand-200 bg-white px-2.5 py-1.5 text-xs text-brand-800" (click)="closeMobileNav()">Close</button>
  </div>
  <div class="flex min-h-0 flex-1 flex-col gap-1 overflow-y-auto pr-1">
    <ng-container *ngIf="(isStaff$ | async) || (isAdmin$ | async)">
      <div class="mt-3 text-[11px] font-semibold uppercase tracking-[0.08em] text-brand-500">Staff</div>
      <a routerLink="/staff/dashboard" routerLinkActive="active"
         class="mt-1 rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Dashboard</a>
      <a routerLink="/staff/reservations" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Reservations</a>
      <a routerLink="/staff/check-in" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Check In</a>
    </ng-container>

    <ng-container *ngIf="(isAdmin$ | async)">
      <div class="mt-4 text-[11px] font-semibold uppercase tracking-[0.08em] text-brand-500">Admin</div>
      <a routerLink="/admin/events" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Events</a>
      <a routerLink="/admin/frequent-clients" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Frequent Clients</a>
      <a routerLink="/admin/clients" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Clients CRM</a>
      <a routerLink="/admin/users" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Users</a>
      <a routerLink="/admin/settings" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Settings</a>
      <a routerLink="/admin/financials" routerLinkActive="active"
         class="rounded-md px-2 py-1.5 text-brand-800 transition-colors hover:bg-brand-100"
         (click)="closeMobileNav()">Financials</a>
    </ng-container>
  </div>

  <div class="mt-3 border-t border-brand-100 pt-3" *ngIf="isAuthenticated$ | async">
    <div class="rounded-xl border border-brand-100 bg-white px-3 py-2">
      <p class="truncate text-sm font-semibold text-brand-900">{{ (name$ | async) || 'User' }}</p>
      <p class="text-xs text-brand-600">{{ (role$ | async) || 'User' }}</p>
    </div>
    <button
      type="button"
      class="mt-2 inline-flex h-10 w-full items-center justify-center rounded-lg border border-brand-200 bg-white text-sm font-semibold text-brand-800"
      (click)="logout()"
    >
      Log out
    </button>
  </div>
</nav>
